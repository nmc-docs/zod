"use strict";(self.webpackChunkreactjs=self.webpackChunkreactjs||[]).push([[536],{3832:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var t=s(4848),i=s(8453);const r={sidebar_position:4},o="Custom validation",c={id:"custom-validation",title:"Custom validation",description:"refine()",source:"@site/docs/custom-validation.md",sourceDirName:".",slug:"/custom-validation",permalink:"/zod/custom-validation",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"Unions",permalink:"/zod/unions"},next:{title:"Check validation",permalink:"/zod/check-validation"}},a={},d=[{value:"refine()",id:"refine",level:2},{value:"superRefine()",id:"superrefine",level:2}];function l(n){const e={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",pre:"pre",ul:"ul",...(0,i.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"custom-validation",children:"Custom validation"})}),"\n",(0,t.jsx)(e.h2,{id:"refine",children:"refine()"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Ta c\xf3 th\u1ec3 custom validation b\u1eb1ng ph\u01b0\u01a1ng th\u1ee9c ",(0,t.jsx)(e.code,{children:".refine()"}),":"]}),"\n"]}),"\n",(0,t.jsx)(e.admonition,{type:"info",children:(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Ph\u01b0\u01a1ng th\u1ee9c ",(0,t.jsx)(e.code,{children:"refine()"})," nh\u1eadn v\xe0o m\u1ed9t callback"]}),"\n",(0,t.jsxs)(e.li,{children:["H\xe0m callback ph\u1ea3i tr\u1ea3 v\u1ec1 ",(0,t.jsx)(e.code,{children:"true"})," ho\u1eb7c ",(0,t.jsx)(e.code,{children:"false"})]}),"\n",(0,t.jsxs)(e.li,{children:["N\u1ebfu h\xe0m callback tr\u1ea3 v\u1ec1 ",(0,t.jsx)(e.code,{children:"false"}),", th\xec t\u1ee9c l\xe0 c\xf3 l\u1ed7i"]}),"\n"]})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'const myString = z.string().refine((val) => val.length <= 255, {\n  message: "String can\'t be more than 255 characters",\n});\n'})}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Validate gi\u1eefa c\xe1c tr\u01b0\u1eddng ph\u1ee5 thu\u1ed9c nhau trong object:"}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'const FormValidationSchema = z\n  .object({\n    password: z.string({ coerce: true }).nonempty("Please enter your password"),\n    confirm: z.string(),\n  })\n  .refine((data) => data.confirm === data.password, {\n    message: "Passwords don\'t match",\n    path: ["confirm"], // Hi\u1ec3n th\u1ecb l\u1ed7i cho tr\u01b0\u1eddng "confirm"\n  });\n'})}),"\n",(0,t.jsx)(e.h2,{id:"superrefine",children:"superRefine()"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["N\u1ebfu mu\u1ed1n custom nhi\u1ec1u validation th\xec ta ph\u1ea3i th\u1ef1c hi\u1ec7n ",(0,t.jsx)(e.code,{children:".refine()"})," nhi\u1ec1u l\u1ea7n. \u0110\u1ec3 tr\xe1nh \u0111i\u1ec1u \u0111\xf3, s\u1eed d\u1ee5ng ",(0,t.jsx)(e.code,{children:".superRefine()"}),":"]}),"\n"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-ts",children:'const FormValidationSchema = z\n  .object({\n    password: z.string({ coerce: true }).nonempty("Please enter your password"),\n    confirm: z.string(),\n  })\n  .superRefine(({ password, confirm }, ctx) => {\n    if (password !== confirm) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: "Password don\'t match",\n        path: ["confirm"],\n      });\n    }\n    if (password.length < 8) {\n      ctx.addIssue({\n        code: z.ZodIssueCode.custom,\n        message: "Password is too short",\n        path: ["password"],\n      });\n    }\n  });\n'})})]})}function h(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>o,x:()=>c});var t=s(6540);const i={},r=t.createContext(i);function o(n){const e=t.useContext(r);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function c(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:o(n.components),t.createElement(r.Provider,{value:e},n.children)}}}]);